<!-- markdownlint-disable MD013 -->
# cost-exporter

![Version: 0.0.1](https://img.shields.io/badge/Version-0.0.1-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 0.0.1](https://img.shields.io/badge/AppVersion-0.0.1-informational?style=flat-square)

An exporter for AWS Cost Explorer stats as metrics

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| config | object | `{"clients":{"aws":{"metrics":[{"granularity":"monthly","group_by":[{"key":"SERVICE","type":"DIMENSION"}],"metrics":["NetAmortizedCost","NetUnblendedCost"]}]}},"metrics_format":"prometheus","outputs":{"http":{"path":"/metrics","port":8080}}}` | Cost Exporter configuration   It is then translated in the `config.yaml` inside the pods |
| config.clients | object | `{"aws":{"metrics":[{"granularity":"monthly","group_by":[{"key":"SERVICE","type":"DIMENSION"}],"metrics":["NetAmortizedCost","NetUnblendedCost"]}]}}` | Cloud client configuration |
| config.clients.aws | object | `{"metrics":[{"granularity":"monthly","group_by":[{"key":"SERVICE","type":"DIMENSION"}],"metrics":["NetAmortizedCost","NetUnblendedCost"]}]}` | Only AWS is supported |
| config.clients.aws.metrics | list | `[{"granularity":"monthly","group_by":[{"key":"SERVICE","type":"DIMENSION"}],"metrics":["NetAmortizedCost","NetUnblendedCost"]}]` | Some default metrics for demonstration purposes   This configuration maps to the `costexplorer.GetCostAndUsageInput` type.   For more information about each field, see: <https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/service/costexplorer#GetCostAndUsageInput> |
| config.metrics_format | string | `"prometheus"` | Only Prometheus format is supported for now   This value is ignored and only put here for   the demonstration purposes |
| config.outputs.http.path | string | `"/metrics"` | Path must contain a starting slash |
| deployment | object | `{"affinity":{},"extraEnv":{},"livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/live","port":8989},"initialDelaySeconds":5,"periodSeconds":5},"nodeSelector":{},"podSecurityContext":{},"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/ready","port":8989},"initialDelaySeconds":5,"periodSeconds":5},"replicaCount":2,"startupProbe":{},"tolerations":{},"topologySpreadConstraints":{}}` | Deployment configuration |
| deployment.extraEnv | object | `{}` | extraEnv allows you to pass additional variables   such as the cloud provider credentials.   Do not do it in production! |
| deployment.podSecurityContext | object | `{}` | Other parameters for the Deployment |
| deployment.replicaCount | int | `2` | 2 replicas for HA, they act independently, which means that each replica issues requests to AWS. You can opt-in for a single replica to reduce the number of requests in favor of HA. |
| deployment.startupProbe | object | `{}` | Probes are started on a different port from the outputs   for the implementation simpicity |
| image | object | `{"pullSecrets":[],"repository":"myrepo/cost-exporter"}` | Image configuration |
| image.pullSecrets | list | `[]` | Configure image pull secrets for pulling container images |
| image.repository | string | `"myrepo/cost-exporter"` | Image repository |
| logLevel | string | `"INFO"` | Log level is INFO by default. |
| service | object | `{"port":8080,"type":"ClusterIP"}` | Service configuration |
| serviceAccount | object | `{"awsRoleArn":"","create":true,"name":""}` | ServiceAccount configuration |
| serviceAccount.awsRoleArn | string | `""` | awsRoleArn to specify the role to authenticate with AWS   AWS access for the cluster has to be configured separately |
| serviceAccount.create | bool | `true` | Create a serviceAccount by default |
| serviceAccount.name | string | `""` | Optionally, you can specify a serviceAccount name   This can be and existing serviceAccount   If you're using an existing serviceAccount, set create=false |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)
