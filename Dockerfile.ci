#checkov:skip=CKV_DOCKER_2: healthchecks are set in K8s
ARG goreleaserImage=v2.3.2
ARG golangImage=1.23.8-alpine
FROM goreleaser/goreleaser:${goreleaserImage} AS goreleaser
FROM golang:${golangImage}
COPY --from=goreleaser /usr/bin/goreleaser /usr/bin/goreleaser
RUN apk add --no-cache git make bash \
    && go install github.com/kyoh86/richgo@latest \
    # Syft is required to generate SBOMs
    && curl -sSfL https://raw.githubusercontent.com/anchore/syft/main/install.sh | sh -s -- -b /usr/local/bin
USER 1001:1001
